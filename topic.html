<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8"/>
        <title>topic-sample</title>
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular.min.js"></script>
        <script type="text/javascript" src="js/app.js"></script>
<style>
.topic
{
border: solid 1px #000000;
}
.comment
{
border: solid 1px #f00000;
}
</style>
    </head>
    <body ng-app="topicModule" ng-controller="topicController as topicCtrl">
    <h1>{{"topic sample"}}</h1>
    <!-- topic list -->
    <div>
        <ul>
        <li ng-repeat="topic in topicCtrl.topics">
            <a href="" ng-click="topicCtrl.setListIndex($index)">{{topic.title}} ({{topic.comments.length}} comments)</a>
        </li>
        </ul>
    </div>

    <!-- topic -->
    <div>
        <ul>
        <li ng-repeat="topic in topicCtrl.topics" ng-show="topicCtrl.isListIndex($index)">
            <div class="topic">
                <h2>{{topic.title}}</h2>
                <p>{{topic.contents}}</p>
                <p>by {{topic.author}} on {{topic.dateAt}}</p>
                <!-- commnet -->
                <p>{{topic.comments.length}} comments posted.</p>
                <ul>
                <li ng-repeat="comment in topic.comments">
                    <div class="comment">
                        {{comment.comment}}
                        <br/>
                        by {{comment.user}} on {{comment.commentedAt}}
                    </div>
                </li>
                </ul>

                <!-- post -->
                <form method="post" ng-controller="commentController as commentCtrl" ng-submit="commentCtrl.addComment(topic)">
                    <p>user:<input type="text" ng-model="commentCtrl.comment.user"></input></p>
                    <textarea ng-model="commentCtrl.comment.comment" placeholder="write your comment."></textarea>
                    <br/>
                    <input type="submit" value="submit comment"></submit>
                </form> 
            </div>
        </li>
        <ul>
    </div>    
    </body>
</html>